# Dialogue Relation Extraction (DialogRE)
# Based on Yu et al., ACL 2020
# Paper: https://aclanthology.org/2020.acl-main.444/
# Dataset: https://github.com/nlpdata/dialogre
#
# DialogRE extracts relations between entities mentioned in dialogue.
# Unlike sentence-level RE, dialogue requires understanding:
# - Cross-turn references
# - Pronoun resolution
# - Implicit relationships
#
# 36 Relation Types include:
# Personal: per:spouse, per:children, per:parents, per:siblings
# Professional: per:employee_of, per:title, per:colleagues
# Social: per:friends, per:roommate, per:neighbor
# Other: per:age, per:origin, per:residence, per:schools_attended
#
# Key Challenges:
# - 96% of relations span multiple sentences
# - 66% involve arguments in different turns
# - High pronoun frequency in dialogue
#
# Annotation Guidelines:
# 1. Read the entire dialogue first
# 2. Identify all person and organization entities
# 3. For each entity pair, determine if a relation exists
# 4. Mark supporting text that evidences the relation
# 5. Relations can be inferred, not just explicitly stated

port: 8000
server_name: localhost
task_name: "Dialogue Relation Extraction"

data_files:
  - sample-data.json
id_key: id
text_key: dialogue

output_file: annotations.json

annotation_schemes:
  # Step 1: Mark entities
  - annotation_type: span
    name: entities
    description: "Highlight all person and organization entities"
    labels:
      - "Person"
      - "Organization"
    label_colors:
      "Person": "#3b82f6"
      "Organization": "#22c55e"
    tooltips:
      "Person": "Names of people, including nicknames and references"
      "Organization": "Companies, institutions, groups"
    allow_overlapping: false

  # Step 2: Relation type
  - annotation_type: radio
    name: relation_type
    description: "What is the relationship between the two most recently marked entities?"
    labels:
      - "per:spouse"
      - "per:children"
      - "per:parents"
      - "per:siblings"
      - "per:friends"
      - "per:colleagues"
      - "per:employee_of"
      - "per:boss"
      - "per:roommate"
      - "per:neighbor"
      - "per:schools_attended"
      - "Other relation"
      - "No relation"
    tooltips:
      "per:spouse": "Married or romantic partners"
      "per:children": "Parent-child relationship (first entity is parent)"
      "per:parents": "Parent-child relationship (first entity is child)"
      "per:siblings": "Brothers, sisters"
      "per:friends": "Friends"
      "per:colleagues": "Work together"
      "per:employee_of": "Works for (person-organization)"
      "per:boss": "Manager/supervisor relationship"
      "per:roommate": "Live together"
      "per:neighbor": "Live near each other"
      "per:schools_attended": "Person attended school/university"
      "Other relation": "Another type of relationship"
      "No relation": "No clear relationship between entities"

  # Step 3: Mark evidence
  - annotation_type: span
    name: evidence
    description: "Highlight the text that supports this relation"
    labels:
      - "Evidence"
    label_colors:
      "Evidence": "#f59e0b"
    tooltips:
      "Evidence": "Text that indicates or proves the relationship"
    allow_overlapping: true

allow_all_users: true
instances_per_annotator: 50
annotation_per_instance: 2
allow_skip: true
skip_reason_required: false
